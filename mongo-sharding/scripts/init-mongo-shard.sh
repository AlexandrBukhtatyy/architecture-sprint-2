#!/bin/bash
############################################################
# Help                                                     #
############################################################
Help()
{
   # Display Help
   echo "Инициализируйте шарды"
   echo
   echo "Syntax: scriptTemplate [shard_name] [port]"
}
############################################################
############################################################
# Arguments checking                                       #
############################################################
############################################################
if [ "$1" = "" ]
then
  echo "Service name is requered!"
  exit
fi

if [ "$2" = "" ]
then
  echo "Port is requered!"
  exit
fi
############################################################
############################################################
# Main program                                             #
############################################################
############################################################
docker compose exec -T $1 mongosh --port $2 <<EOF
rs.initiate(
    {
      _id : "$1",
      members: [
        { _id : 0, host : "$1:$2" },
      ]
    }
);
exit();
EOF
